<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="Brutus [DMC]">
  <meta name="description" content="bpdiag: a script to visualize blood pressure measurements">
  <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
  <title></title>
</head>
<body>
<!-- HEADER -->
<div id="header_wrap" class="outer">
  <header class="inner">
    <a id="forkme_banner" href="https://github.com/brutus/bpdiag">View on GitHub</a>
    <h1 id="project_title">bpdiag</h1>
    <h2 id="project_tagline">a script to visualize blood pressure measurements</h2>
    <section id="downloads">
      <a class="zip_download_link" href="https://github.com/brutus/bpdiag/zipball/master">Download this project as a .zip file</a>
      <a class="tar_download_link" href="https://github.com/brutus/bpdiag/tarball/master">Download this project as a tar.gz file</a>
    </section>
  </header>
</div>
<!-- MAIN CONTENT -->
<div id="main_content_wrap" class="outer">
  <section id="main_content" class="inner">
    <p><strong>BP Diag</strong> parses blood pressure statistics from data files, generates some
statistics and prints them to <em>STDERR</em>. You can export the data (and the
gathered statistics) to <strong>JSON</strong> (dump to <em>STDOUT</em>). And you can also generate
<strong>SVG</strong> or <strong>PNG</strong> charts from it:</p>
<pre class="literal-block">
bpdiag [OPTIONS] [OUTPUT [OUTPUT OPTIONS]].. [PARSER [PARSER OPTIONS]] FILENAME..
</pre>
<p>To see a list of possible command line options run:</p>
<pre class="literal-block">
bpdiag.py --help
</pre>
<div class="section" id="examples">
<h2>Examples</h2>
<p>Lets say we got a file called <tt class="docutils literal">bloodpressure.txt</tt> containing the following
values in a simple format. This is a good job for our <em>default parser</em> (there
are other <strong>parsers</strong>, but more on this later):</p>
<pre class="literal-block">
136/83/65, 132/82/70
144/82/86, 137/81/75, -,         143/80/68
131/82/60, 144/82/64, 136/79/67, 140/80/62
136/83/68, 138/80/99, -,         133/74/65
136/79/67, 131/76/64, 135/81/72, 136/75/61
127/79/72
</pre>
<p>So if we run <strong>BP Diag</strong> over the file like this:</p>
<pre class="literal-block">
bpdiag.py bloodpressure.txt
</pre>
<p>We got the following results:</p>
<pre class="literal-block">
Parsed 17 value(s)...
Statistics (min, max, avg):
:: SYS...: 127, 144, 136
:: DIA...:  74,  83,  79
:: PULSE.:  60,  99,  69
</pre>
<p>We can also dump the results to <strong>JSON</strong> with <tt class="docutils literal"><span class="pre">--json</span></tt> or generate a line
chart from it with <tt class="docutils literal"><span class="pre">--chart</span></tt> (for more options see below).</p>
<img alt="http://brutus.github.com/bpdiag/images/bp.png" src="http://brutus.github.com/bpdiag/images/bp.png" />
</div>
<div class="section" id="features">
<h2>Features</h2>
<div class="section" id="modular-input-parsers">
<h3>Modular Input: Parsers</h3>
<p><strong>Parsers</strong> define how the input from the given files is transformed into
<em>Measurements</em> instances containing the data for each parsed measurement.</p>
<p><strong>BP Diag</strong> comes with a couple of parsers, but it's easy to write your own if
they don't fit your needs (just take a look at the source documentation of
the module).</p>
<div class="section" id="parser-plaintext">
<h4>Parser: Plaintext</h4>
<p>The <em>plaintext parser</em> is good to grab values from simple text files, like
copied from a note taking app or whatever. It's for files that just store a
couple of <em>SYS</em>, <em>DIA</em> and <em>PULSE</em> values.</p>
<p>For each line the <tt class="docutils literal"><span class="pre">--delimiter</span></tt> (default is <tt class="docutils literal">,</tt>) is used to split multiple
entries on the line. And <tt class="docutils literal"><span class="pre">--separator</span></tt> (default: <tt class="docutils literal">/</tt>) is used to split the
entries into the <em>SYS</em>, <em>DIA</em> and <em>PULSE</em> values. Entries that just contain
the <tt class="docutils literal"><span class="pre">--skip</span></tt> string (default: <tt class="docutils literal">-</tt>) are skipped.</p>
<div class="section" id="number-of-measurements-per-line">
<h5>Number of measurements per line</h5>
<p>Per default all values are gathered one after the other. But you can use the
<tt class="docutils literal"><span class="pre">--entries</span></tt> option to set a fixed number of measurements per line.</p>
<p>What this means is that only that much values are used per line (even if there
are more) and if a line contains less than <em>entries</em> values, the remaining
ones are filled with <tt class="docutils literal">None</tt> values. Also values that are the <em>skip</em> string
are not ignored but stored as a <cite>None</cite> value too.</p>
<p>This can be helpful in cases where you have a given number of measurements per
line and you want to keep them aligned even if sometimes a measurement is
skipped / missing.:</p>
<pre class="literal-block">
bpdiag.py --json --compact --entries 4 bloodpressure.txt
</pre>
<p>Will result in the following JSON:</p>
<pre class="code json literal-block">
<span class="punctuation">[[</span><span class="literal number integer">136</span><span class="punctuation">,</span><span class="literal number integer">83</span><span class="punctuation">,</span><span class="literal number integer">65</span><span class="punctuation">],[</span><span class="literal number integer">132</span><span class="punctuation">,</span><span class="literal number integer">82</span><span class="punctuation">,</span><span class="literal number integer">70</span><span class="punctuation">],</span><span class="keyword constant">null</span><span class="punctuation">,</span><span class="keyword constant">null</span><span class="punctuation">,[</span><span class="literal number integer">144</span><span class="punctuation">,</span><span class="literal number integer">82</span><span class="punctuation">,</span><span class="literal number integer">86</span><span class="punctuation">],[</span><span class="literal number integer">137</span><span class="punctuation">,</span><span class="literal number integer">81</span><span class="punctuation">,</span><span class="literal number integer">75</span><span class="punctuation">],</span><span class="keyword constant">null</span><span class="punctuation">,[</span><span class="literal number integer">143</span><span class="punctuation">,</span><span class="literal number integer">80</span><span class="punctuation">,</span><span class="literal number integer">68</span><span class="punctuation">],[</span><span class="literal number integer">131</span><span class="punctuation">,</span><span class="literal number integer">82</span><span class="punctuation">,</span><span class="literal number integer">60</span><span class="punctuation">],[</span><span class="literal number integer">144</span><span class="punctuation">,</span><span class="literal number integer">82</span><span class="punctuation">,</span><span class="literal number integer">64</span><span class="punctuation">],[</span><span class="literal number integer">136</span><span class="punctuation">,</span><span class="literal number integer">79</span><span class="punctuation">,</span><span class="literal number integer">67</span><span class="punctuation">],[</span><span class="literal number integer">140</span><span class="punctuation">,</span><span class="literal number integer">80</span><span class="punctuation">,</span><span class="literal number integer">62</span><span class="punctuation">],[</span><span class="literal number integer">136</span><span class="punctuation">,</span><span class="literal number integer">83</span><span class="punctuation">,</span><span class="literal number integer">68</span><span class="punctuation">],[</span><span class="literal number integer">138</span><span class="punctuation">,</span><span class="literal number integer">80</span><span class="punctuation">,</span><span class="literal number integer">99</span><span class="punctuation">],</span><span class="keyword constant">null</span><span class="punctuation">,[</span><span class="literal number integer">133</span><span class="punctuation">,</span><span class="literal number integer">74</span><span class="punctuation">,</span><span class="literal number integer">65</span><span class="punctuation">],[</span><span class="literal number integer">136</span><span class="punctuation">,</span><span class="literal number integer">79</span><span class="punctuation">,</span><span class="literal number integer">67</span><span class="punctuation">],[</span><span class="literal number integer">131</span><span class="punctuation">,</span><span class="literal number integer">76</span><span class="punctuation">,</span><span class="literal number integer">64</span><span class="punctuation">],[</span><span class="literal number integer">135</span><span class="punctuation">,</span><span class="literal number integer">81</span><span class="punctuation">,</span><span class="literal number integer">72</span><span class="punctuation">],[</span><span class="literal number integer">136</span><span class="punctuation">,</span><span class="literal number integer">75</span><span class="punctuation">,</span><span class="literal number integer">61</span><span class="punctuation">],[</span><span class="literal number integer">127</span><span class="punctuation">,</span><span class="literal number integer">79</span><span class="punctuation">,</span><span class="literal number integer">72</span><span class="punctuation">],</span><span class="keyword constant">null</span><span class="punctuation">,</span><span class="keyword constant">null</span><span class="punctuation">,</span><span class="keyword constant">null</span><span class="punctuation">]</span>
</pre>
</div>
</div>
</div>
<div class="section" id="output">
<h3>Output</h3>
<p>As we already seen, you will always get some statistics-output to <em>STDERR</em>.
But you can also export the gathered data to a number of formats:</p>
<div class="section" id="export-json">
<h4>Export JSON</h4>
<p>There are a couple of ways to do this, but always the JSON dump is written to
<em>STDOUT</em>, so you can redirect the dump to a file.</p>
<p>You can dump the data as an array of SYS, DIA, PULS arrays with the <tt class="docutils literal"><span class="pre">--json</span></tt>
option. Or as an array of objects with the <tt class="docutils literal"><span class="pre">--json-obj</span></tt> option (this will
include all attributes of the <em>Measurement</em> instances, not just <em>SYS</em>, <em>DIA</em>
and <em>PULSE</em>). If you want the gathered statistics too, use <tt class="docutils literal"><span class="pre">--json-stats</span></tt>.</p>
<p>There are a couple of options to govern how the dump is formated, see the
<tt class="docutils literal"><span class="pre">--help</span></tt> output for info on that.</p>
</div>
<div class="section" id="export-chart">
<h4>Export Chart</h4>
<p>To generate SVG charts, you need to have <a class="reference external" href="http://pygal.org/">PyGal</a> installed (see below). Other
than that, just use the <tt class="docutils literal"><span class="pre">--chart</span></tt> option to have a chart called <tt class="docutils literal">bp.svg</tt>
generated in your current directory. There are more options to this, take a
look at the <tt class="docutils literal"><span class="pre">--help</span></tt> output.</p>
<p>Instead of the interactive SVG charts you can use PNG as output format. Just
use the <tt class="docutils literal"><span class="pre">--png</span></tt> option along with <tt class="docutils literal"><span class="pre">--chart</span></tt>. You need a couple more
dependencies for that though, take a look below.</p>
</div>
</div>
</div>
<div class="section" id="install">
<h2>Install</h2>
<p>You can install <strong>BP Diag</strong> with <a class="reference external" href="http://www.pip-installer.org/en/latest/index.html">pip</a> or from source.</p>
<p><strong>Install with pip</strong></p>
<p><a class="reference external" href="http://www.pip-installer.org/en/latest/index.html">pip</a> is &quot;<em>a tool for installing and managing Python packages</em>&quot;. If you don't
have it installed, see the <a class="reference external" href="http://www.pip-installer.org/en/latest/installing.html">pip install instructions</a>:</p>
<pre class="literal-block">
pip install --user bpdiag
</pre>
<p><strong>Install from source</strong></p>
<p>You can fetch the latest <a class="reference external" href="https://github.com/brutus/bpdiag/zipball/master">sourceball</a> from github and unpack it, or just clone
this repository: <tt class="docutils literal">git clone <span class="pre">git://github.com/brutus/bpdiag</span></tt>. If you
got the source, change into the directory and use <tt class="docutils literal">setup.py</tt>:</p>
<pre class="literal-block">
python setup.py install
</pre>
<div class="section" id="dependencies">
<h3>Dependencies</h3>
<p><a class="reference external" href="http://pygal.org/">PyGal</a> is used to generate the charts. If you want to generate charts,
you need to install it. With <a class="reference external" href="http://www.pip-installer.org/en/latest/index.html">pip</a> it's as easy as this:</p>
<pre class="literal-block">
pip install --user pygal
</pre>
<p>If you want to export to PNG files, you need <a class="reference external" href="http://cairosvg.org/">CairoSVG</a>, <a class="reference external" href="http://packages.python.org/tinycss/">tinycss</a> and
<a class="reference external" href="http://packages.python.org/cssselect/">cssselect</a> too. You can install them like this:</p>
<pre class="literal-block">
pip install --user CairoSVG tinycss cssselect
</pre>
</div>
</div>
<div class="section" id="bugs-and-contribution">
<h2>Bugs  and Contribution</h2>
<p><strong>BP Diag</strong> is at home at: <a class="reference external" href="https://github.com/brutus/bpdiag/">https://github.com/brutus/bpdiag/</a></p>
<p>If you want to run the test cases, see that you got <a class="reference external" href="https://nose.readthedocs.org/en/latest/">nose</a> installed and run
<tt class="docutils literal">nosetests</tt> from the <tt class="docutils literal">bpdiag</tt> directory (the one containing the module).
If you got <strong>bpdiag</strong> already installed, run them like this: <tt class="docutils literal">nosetest
test_bpdiag</tt>.</p>
<p>If something fails, please get in touch.</p>
<p>If you find any bugs, issues or anything, please use the <a class="reference external" href="https://github.com/brutus/bpdiag/issues">issue tracker</a>.</p>
</div>


  </section>
</div>
<!-- FOOTER  -->
<div id="footer_wrap" class="outer">
  <footer class="inner">
    <p class="copyright">bpdiag maintained by <a href="https://github.com/brutus">brutus</a></p>
    <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
  </footer>
</div>
</body>
</html>
